let timer;const property=$("#property-images").data("id");function updateAlbumOrder(e,r){console.log(e,r),$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"POST",url:$("#property-images").data("url"),data:{property:property,old_position:e,current_position:r},success:function(e){client=null,step=null}})}function dragStart(e){e.currentTarget.classList.add("dragging")}function dragEnd(e){e.currentTarget.classList.remove("dragging")}function dragOver(e){let r=document.querySelector(".draggable-item.dragging"),t=r.dataset.order,a=e.currentTarget.dataset.position;null!=t&&null!=a&&t!==a&&(e.currentTarget.appendChild(r),timer&&clearTimeout(timer),timer=setTimeout((()=>{let e=$(`.draggable-area[data-position=${t}]`),d=$(`.draggable-item[data-order=${a}]`);e.append(d),d.attr("data-order",t),r.dataset.order=a,updateAlbumOrder(t,a),timer=null}),1))}document.querySelectorAll(".draggable-item").forEach((e=>{e.addEventListener("dragstart",dragStart),e.addEventListener("dragend",dragEnd)})),document.querySelectorAll(".draggable-area").forEach((e=>{e.addEventListener("dragover",dragOver),e.addEventListener("drop",dragOver)}));
